(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dd7a085"],{"1a9c":function(e,t,s){"use strict";s("caad"),s("498a"),s("b0c0"),s("e9c4");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"commonpop",staticStyle:{width:"100%"},attrs:{id:"common_pop"},on:{click:function(t){return t.target!==t.currentTarget?null:e.cancel.apply(null,arguments)}}},[t("div",{staticClass:"popup",staticStyle:{width:"auto"}},[t("div",{staticClass:"popup_top"},[t("span",[e._v(e._s(e.title))]),t("i",{staticClass:"el-icon-close",on:{click:e.cancel}})]),e._v(" "),t("div",{staticClass:"popup_content clearfix"},[t("div",{staticClass:"content_left"},[t("ul",{directives:[{name:"show",rawName:"v-show",value:e.changeType,expression:"changeType"}],staticClass:"tab clearfix"},[e.showConf.showStruct?t("li",{class:{active:"1"==e.selectType},on:{click:function(t){e.selectType="1"}}},[t("span",[e._v("选择机构")])]):e._e(),e._v(" "),e.showConf.showPerson?t("li",{class:{active:"2"==e.selectType},on:{click:e.selectTypeSelect}},[t("span",[e._v("选择人员")])]):e._e()]),e._v(" "),t("ul",{directives:[{name:"show",rawName:"v-show",value:e.tabList.length>1,expression:"tabList.length > 1"}],staticClass:"tab clearfix"},[e.showConf.showDepart?t("li",{class:{active:"部门"==e.type},on:{click:function(t){return e.setTypes("部门")}}},[t("span",[e._v("部门")])]):e._e(),e._v(" "),e.showAuthKey&&e.showConf.showJob&&e.$authH.isSuper()?t("li",{class:{active:"岗位"==e.type},on:{click:function(t){return e.setTypes("岗位")}}},[t("span",[e._v("岗位")])]):e._e(),e._v(" "),e.showAuthKey&&e.showConf.showTag?t("li",{class:{active:"标签"==e.type},on:{click:function(t){return e.setTypes("标签")}}},[t("span",[e._v("标签")])]):e._e(),e._v(" "),e.showAuthKey&&e.showConf.relative?t("li",{class:{active:"相对角色"==e.type},on:{click:function(t){return e.setTypes("相对角色")}}},[t("span",[e._v("相对角色")])]):e._e()]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:["部门","岗位"].includes(e.type),expression:"['部门', '岗位'].includes(type)"}],staticClass:"searchinputs"},[e.mixCsuSystemTree?[t("el-popover",{attrs:{placement:"bottom",width:"249",transition:"0",trigger:"manual","popper-class":"b_userData_left_depart_popover"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("div",{staticClass:"depart_search",attrs:{slot:"reference"},slot:"reference"},[t("i",{staticClass:"el-icon-search"}),e._v(" "),"部门"==e.type?t("el-input",{attrs:{placeholder:"输入部门名称"},on:{focus:e.focus,blur:e.blur,input:e.getDepartTree},model:{value:e.keyword1,callback:function(t){e.keyword1=t},expression:"keyword1"}}):t("el-input",{attrs:{placeholder:"输入岗位名称"},model:{value:e.jobText,callback:function(t){e.jobText="string"===typeof t?t.trim():t},expression:"jobText"}})],1),e._v(" "),e.departList.length?t("ul",{staticClass:"depart_list"},e._l(e.departList,(function(s,i){return t("li",{key:i,on:{click:function(t){return e.selectDepart(s)}}},[t("span",[e._v(e._s(s.name))]),e._v(" "),t("el-checkbox",{attrs:{label:s.id,name:JSON.stringify(s)},on:{change:e.changelabel},model:{value:e.chooseResultID,callback:function(t){e.chooseResultID=t},expression:"chooseResultID"}})],1)})),0):t("div",{staticClass:"depart_nodata"},[e._v("暂无数据")])])]:["部门"==e.type?t("el-input",{attrs:{placeholder:"输入部门名称"},on:{input:e.departSearch},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}):t("el-input",{attrs:{placeholder:"输入岗位名称"},model:{value:e.jobText,callback:function(t){e.jobText="string"===typeof t?t.trim():t},expression:"jobText"}})]],2),e._v(" "),"部门"==e.type?t("div",{staticClass:"list_department list"},[e.mixCsuSystemTree?["users"==e.settype?t("el-tree",{ref:"eltrees1",attrs:{props:e.props,"node-key":"id","check-on-click-node":!0,"default-expanded-keys":[0],"current-node-key":e.currentDepartId,"highlight-current":!0,"filter-node-method":e.filterNode,load:e.loadNode,lazy:""},on:{"node-click":e.selectUsers}}):e._e(),e._v(" "),"all"==e.settype?t("el-tree",{ref:"eltrees2",attrs:{props:e.props,"node-key":"id","show-checkbox":"","default-expanded-keys":[0],"check-strictly":!0,"default-checked-keys":e.chooseResultID,"filter-node-method":e.filterNode,load:e.loadNode,lazy:""},on:{"node-click":e.selectUsers,"check-change":e.handleCheckChange}}):e._e()]:["users"==e.settype?t("el-tree",{ref:"eltrees1",attrs:{props:e.props,data:e.department,"node-key":"id","check-on-click-node":!0,"default-expanded-keys":[0],"current-node-key":e.currentDepartId,"highlight-current":!0,"filter-node-method":e.filterNode},on:{"node-click":e.selectUsers}}):e._e(),e._v(" "),"all"==e.settype?t("el-tree",{ref:"eltrees2",attrs:{props:e.props,data:e.department,"node-key":"id","show-checkbox":"","default-expanded-keys":[0],"check-strictly":!0,"default-checked-keys":e.chooseResultID,"filter-node-method":e.filterNode},on:{"node-click":e.selectUsers,"check-change":e.handleCheckChange}}):e._e()]],2):e._e(),e._v(" "),"岗位"==e.type?t("ul",{staticClass:"list list_job"},["users"==e.settype?e._l(e.nowJob,(function(s,i){return t("li",{key:i,domProps:{textContent:e._s(s.name)},on:{click:function(t){return e.selectUsers(s)}}})})):e._e(),e._v(" "),"all"==e.settype?e._l(e.nowJob,(function(s,i){return t("li",{key:i,on:{click:function(t){return e.selectUsers(s)}}},[t("el-checkbox",{attrs:{label:s.id,name:JSON.stringify(s)},on:{change:e.changelabel},model:{value:e.chooseResultID,callback:function(t){e.chooseResultID=t},expression:"chooseResultID"}}),e._v("\n              "+e._s(s.name)+"\n            ")],1)})):e._e()],2):e._e(),e._v(" "),"标签"==e.type?t("ul",{staticClass:"list list_team"},e._l(e.team,(function(i,a){return i.hidden?e._e():t("li",{staticClass:"fluder"},[t("p",{on:{click:function(t){return e.teamCategoryClick(t)}}},[t("img",{staticClass:"file1",attrs:{src:s("2929"),alt:""}}),e._v(e._s(i.name)+"\n            ")]),e._v(" "),t("ul",[e._l(i.teams,(function(s){return"users"!=e.settype||s.hidden?e._e():t("li",{domProps:{textContent:e._s(s.name)},on:{click:function(t){return t.stopPropagation(),e.selectUsers(s)}}})})),e._v(" "),e._l(i.teams,(function(s){return"all"==e.settype?t("li",{on:{click:function(t){return t.stopPropagation(),e.selectUsers(s)}}},[t("el-checkbox",{attrs:{label:s.id,name:JSON.stringify(s)},on:{change:e.changelabel},model:{value:e.chooseResultID,callback:function(t){e.chooseResultID=t},expression:"chooseResultID"}}),e._v("\n                "+e._s(s.name)+"\n              ")],1):e._e()}))],2)])})),0):e._e(),e._v(" "),"相对角色"==e.type?t("ul",{staticClass:"list list_job"},["users"==e.settype?e._l(e.relative,(function(s,i){return t("li",{key:i},[t("el-checkbox",{attrs:{label:i,name:JSON.stringify({name:s,id:i,type:i})},on:{change:e.changelabel},model:{value:e.chooseResultID,callback:function(t){e.chooseResultID=t},expression:"chooseResultID"}}),e._v("\n              "+e._s(s)+"\n            ")],1)})):e._e()],2):e._e()]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"2"==e.selectType&&"相对角色"!==e.type,expression:"selectType == '2' && type !== '相对角色'"}],staticClass:"list-bot"},[t("div",{staticClass:"tit"},[t("span",{staticClass:"name"},[e._v("所属人员")]),e._v(" "),""==e.showConf.mode?t("label",[e._v("\n            全选"),t("input",{attrs:{type:"checkbox"},on:{change:e.quanxuan}})]):e._e()]),e._v(" "),t("div",{staticClass:"searchinputs"},[t("el-input",{attrs:{placeholder:"输入人员姓名/学工号"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),e.searchList.length?t("i",{staticClass:"el-icon-close",on:{click:function(t){e.keyword=""}}}):e._e(),e._v(" "),e.keyword?[e.searchList.length?t("div",{staticClass:"searchLists"},[t("div",{staticClass:"tab"},[t("span",{class:{acitve:"all"==e.searchListTab},on:{click:function(t){e.searchListTab="all"}}},[e._v("全部")]),e._v(" "),t("span",{class:{acitve:"teacher"==e.searchListTab},on:{click:function(t){e.searchListTab="teacher"}}},[e._v("教职工")]),e._v(" "),t("span",{class:{acitve:"student"==e.searchListTab},on:{click:function(t){e.searchListTab="student"}}},[e._v("学生")])]),e._v(" "),t("ul",{on:{scroll:e.searchUserScroll}},e._l(e.searchList,(function(s){return t("li",[t("el-popover",{attrs:{"open-delay":100,placement:"right",trigger:"hover"}},[t("div",[e._v("姓名："+e._s(s.realname||s.name))]),e._v(" "),s.number?t("div",[e._v("工号："+e._s(s.number))]):e._e(),e._v(" "),s.college?t("div",[e._v("单位："+e._s(s.college))]):e._e(),e._v(" "),t("div",{attrs:{slot:"reference"},slot:"reference"},[t("el-checkbox",{attrs:{label:s.id,name:JSON.stringify(s)},on:{change:e.changelabel},model:{value:e.chooseResultID,callback:function(t){e.chooseResultID=t},expression:"chooseResultID"}}),e._v(" "),t("span",{domProps:{textContent:e._s(s.realname||s.name)}}),e._v(" "),t("span",{staticClass:"dpmt",domProps:{textContent:e._s(s.number)}})],1),e._v(" "),t("span",{staticClass:"de_part",attrs:{slot:"reference"},domProps:{textContent:e._s(s.college?s.college:"")},slot:"reference"})])],1)})),0)]):t("ul",{staticClass:"searchListno"},[e._v("\n              未搜索到该用户\n            ")])]:e._e()],2),e._v(" "),t("div",{staticClass:"tab"},[t("span",{class:{acitve:"teacher"==e.listBotTab},on:{click:function(t){e.listBotTab="teacher"}}},[e._v("教职工")]),e._v(" "),t("span",{class:{acitve:"student"==e.listBotTab},on:{click:function(t){e.listBotTab="student"}}},[e._v("学生")])]),e._v(" "),t("ul",{on:{scroll:function(t){return e.scroll(t)}}},e._l(e.selectList,(function(s){return t("li",[t("el-checkbox",{attrs:{label:s.id,name:JSON.stringify(s)},on:{change:e.changelabel},model:{value:e.chooseResultID,callback:function(t){e.chooseResultID=t},expression:"chooseResultID"}}),e._v(" "),t("el-popover",{attrs:{"open-delay":100,placement:"right",trigger:"hover"}},[t("div",[e._v("姓名："+e._s(s.realname||s.name))]),e._v(" "),s.department?t("div",[e._v("工号："+e._s(s.department))]):e._e(),e._v(" "),s.college?t("div",[e._v("单位："+e._s(s.college))]):e._e(),e._v(" "),t("span",{attrs:{slot:"reference"},domProps:{textContent:e._s(s.realname||s.name)},slot:"reference"}),e._v(" "),t("span",{staticClass:"dpmt",attrs:{slot:"reference"},domProps:{textContent:e._s(s.department?s.department:"")},slot:"reference"}),t("br"),e._v(" "),t("span",{staticClass:"de_part",attrs:{slot:"reference"},domProps:{textContent:e._s(s.college?s.college:"")},slot:"reference"})])],1)})),0)]),e._v(" "),t("div",{staticClass:"content_right"},[t("div",{staticClass:"tit"},[t("span",{staticClass:"name"},[e._v(e._s(e.selectedTitle))]),e._v(" "),t("span",{on:{click:function(t){e.chooseResult=[]}}},[e._v("清空")])]),e._v(" "),t("ul",e._l(e.chooseResult,(function(i,a){return t("li",{staticClass:"ofl"},[t("el-popover",{attrs:{"open-delay":100,placement:"right",trigger:"hover"}},[t("div",[e._v("姓名："+e._s(i.realname||i.name))]),e._v(" "),i.number?t("div",[e._v("工号："+e._s(e._f("handleNumber")(i.number)))]):e._e(),e._v(" "),i.college?t("div",[e._v("单位："+e._s(i.college))]):e._e(),e._v(" "),t("div",{attrs:{slot:"reference"},slot:"reference"},[t("span",{staticClass:"ofl",domProps:{textContent:e._s(i.realname||i.name)}}),e._v(" "),t("span",{staticClass:"dpmt ofl"},[e._v(e._s(e._f("handleNumber")(i.number)))])]),e._v(" "),t("span",{staticClass:"de_part as",attrs:{slot:"reference"},domProps:{textContent:e._s(i.college?i.college:"")},slot:"reference"}),e._v(" "),t("img",{attrs:{slot:"reference",src:s("b85c"),alt:""},on:{click:function(t){return e.delone(e.chooseResult,a)}},slot:"reference"})])],1)})),0)])]),e._v(" "),t("div",{staticClass:"popup_footer"},[t("a",{staticClass:"cancel",attrs:{href:"javascript:;"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),t("a",{staticClass:"sure",attrs:{href:"javascript:;"},on:{click:e.save}},[e._v("确定")])])])])},a=[],n=s("66f2"),r=(s("c4cb"),s("04d3")),o=s("191a"),c=s("4fef"),l=s("c130"),h=(s("4de4"),s("d3b7"),s("2532"),s("159b"),s("7db0"),s("a434"),s("c740"),s("d81d"),s("99af"),s("fb6a"),s("5961")),u=s("e48e"),d={name:"newpop",data:function(){return{flag:"",title:"选择人员/机构",selectedTitle:"已选人员/机构",changeType:!0,selectType:"1",ajaxLock:!1,tabList:["部门","岗位","标签"],type:"部门",keyword:"",hideNodes:[],filterText:"",jobText:"",isopen:0,department:[],cleardepartment:[],job:[],team:[],relative:[],selectList:[],searchList:[],searchTotal:0,searchUser:{},chooseResult:[],chooseResultID:[],props:{label:"name",children:"children"},timeHandler:"",lock:!0,searchUserLock:!1,searchUserPage:1,listBotTab:"teacher",searchListTab:"all",currentDepartId:null,item:{},isLeaf:"leaf",departList:[],visible:!1,keyword1:"",depart:[],parentParams:{}}},mixins:[h["a"],u["a"]],props:{settype:String,hasChooseList:Array,getType:"",isSite:!1,showConf:{type:Object,default:function(){return{showStruct:!1,showDepart:!0,showJob:!0,showTag:!0,showPerson:!1,mode:"",before:0,departAuthHidden:!1,filterInfo:{}}}},newuser:!1,parentBepartId:0},computed:{nowJob:function(){var e=this;return this.jobText?this.job.filter((function(t){return t.name.includes(e.jobText)})):this.job},showAuthKey:function(){var e=JSON.parse(sessionStorage.getItem("officeDb_authControl_key")).permits,t=JSON.parse(sessionStorage.getItem("officeDb_authControl_key")).issuper;return(0!=t||!e.includes("AppManage")||!e.includes("AppDepartManage")||"督办管理人员弹窗"!=this.title)&&((0!=t||!e.includes("AppManage")||!e.includes("AppDepartManage")||2!=this.selectType)&&(0!=t||!e.includes("AppManage")||!e.includes("AppDepartManage")||1!=this.selectType))},nowSelectList:function(){var e=[];switch(this.listBotTab){case"teacher":e=this.selectList.filter((function(e){return"教职工"==e.identity}));break;case"student":e=this.selectList.filter((function(e){return"专科生"==e.identity||"本科生"==e.identity||"研究生"==e.identity}));break;default:return this.selectList}return e.length<10&&20*this.searchUser.p<this.searchTotal&&(this.ajaxLock||(this.ajaxLock=!0,this.getUset("scroll"))),e},nowSearchList:function(){var e=[];switch(this.searchListTab){case"teacher":e=this.searchList.filter((function(e){return"教职工"==e.identity}));break;case"student":e=this.searchList.filter((function(e){return"专科生"==e.identity||"本科生"==e.identity||"研究生"==e.identity}));break;default:return this.searchList}return e.length<10&&20*this.searchUserPage<this.searchTotal&&(this.searchUserLock=!0,this.searchUserPage++,this.searchUserF(this.keyword)),e}},created:function(){this.mixCsuSystemTree&&(this.props.children="zones"),this.isopen=1,this.allDpmt(),this.chooseResult=JSON.parse(JSON.stringify(this.hasChooseList||[])),this.parentBepartId&&(this.currentDepartId=this.parentBepartId,this.getUset("department",{id:this.parentBepartId})),(this.showConf.relative||this.showConf.disabled||this.showConf.uids)&&(this.selectType="2",this.title="选择人员",this.selectedTitle="已选人员")},methods:{selectTypeSelect:function(){this.selectType="2";var e=JSON.parse(sessionStorage.getItem("officeDb_authControl_key")).permits,t=JSON.parse(sessionStorage.getItem("officeDb_authControl_key")).issuper;0==t&&e.includes("AppManage")&&e.includes("AppDepartManage")&&"2"==this.selectType&&this.setTypes("部门")},loadNode:function(e,t){var s=this;setTimeout(Object(l["a"])(Object(c["a"])().mark((function i(){var a;return Object(c["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(0!==e.level){i.next=5;break}return i.next=3,s.allDpmt();case 3:return a=i.sent,i.abrupt("return",t(a));case 5:if(!(e.level>1)){i.next=10;break}return i.next=8,s.allDpmt(e.data.id);case 8:return a=i.sent,i.abrupt("return",t(a[0].children));case 10:setTimeout(Object(l["a"])(Object(c["a"])().mark((function e(){var i;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.allDpmt();case 2:return i=e.sent,e.abrupt("return",t(i[0].children));case 4:case"end":return e.stop()}}),e)}))),500);case 11:case"end":return i.stop()}}),i)}))),300)},focus:function(){this.visible=!0},blur:function(){var e=this;window.setTimeout((function(){e.keyword1="",e.departList=[],e.visible=!1}),300)},getDepartTree:function(e,t){var s=this,i={};i={name:e,scene:"DepartManage"},this.$appFetch({method:"get",url:"systemTree",data:i},(function(e){0==e.e?s.departList=e.d[0].children:s.$message.error({message:e.m})}),(function(e){s.$message.error({message:"数据请求失败，请重新进入页面或点击按钮"})}))},selectDepart:function(e){e.auth},initInfo:function(e){var t=this;e.forEach((function(e){if("hidden"==e.auth&&t.hideNodes.push(e.id),"read"==e.auth&&(e.disabled=!0),t.showConf.filterInfo&&t.showConf.filterInfo.depart){var s=t.showConf.filterInfo.depart.find((function(t){return t.value==e.id}));s||t.hideNodes.push(e.id)}e.children&&e.children.length&&t.initInfo(e.children)}))},setTypes:function(e){if(this.type=e,this.isopen)if("部门"==e){if(this.allDpmt(),!this.isopen)return;this.$nextTick((function(){"users"==this.settype?this.$refs.eltrees1.setCheckedKeys(this.chooseResultID):"all"==this.settype&&this.$refs.eltrees2.setCheckedKeys(this.chooseResultID)}))}else"岗位"==e?this.allJob():"标签"==e?this.allTeam():"相对角色"==e&&this.getRelative()},teamCategoryClick:function(e){$(e.currentTarget).siblings("ul").toggleClass("open")},filterNode:function(e,t){var s=!this.showConf.departAuthHidden||!this.hideNodes.includes(t.id);return e?-1!==t.name.indexOf(e)&&s:s},changelabel:function(e,t){var s=JSON.parse(t.target.name);if(e)""!=this.showConf.mode?this.chooseResult=[s]:this.chooseResult.push(s);else for(var i in this.chooseResult)(this.chooseResult[i].uid||this.chooseResult[i].id)==s.id&&this.chooseResult.splice(i,1)},handleCheckChange:function(e,t,s){if(""==this.showConf.mode)if(t){var i=JSON.parse(JSON.stringify(e));if(void 0!=i.children&&delete i.children,this.chooseResult.findIndex((function(e){return e.id==i.id}))>=0)return;this.chooseResult.push(i)}else for(var a in this.chooseResult)this.chooseResult[a].id==e.id&&this.chooseResult.splice(a,1);else if("single"==this.showConf.mode)if(t){i=JSON.parse(JSON.stringify(e));void 0!=i.children&&delete i.children,this.chooseResult=[i]}else e.id==this.chooseResult[0].id&&(this.chooseResult=[])},save:function(){this.parentParams={},this.setTypes("部门"),this.$nextTick((function(){this.$emit("getBackData",this.chooseResult),this.chooseResult=[]}))},cancel:function(){this.parentParams={},this.setTypes("部门"),this.$nextTick((function(){this.$emit("getBackData",!1)}))},scroll:function(e){var t=e.currentTarget;if($(t).height()+$(t).scrollTop()>=$(t)[0].scrollHeight-30){if(this.ajaxLock)return!1;this.ajaxLock=!0,this.getUset("scroll")}},selectUsers:function(e){if(this.listBotTab="teacher",this.lock&&"department"==e.type)this.getUset(e.type,e);else if("job"==e.type||"team"==e.type){if("2"!=this.selectType)return;this.getUset(e.type,e)}},allDpmt:function(e){var t=this,s=this,i={};return s.isSite&&(i.scene="delegate"),s.getType&&(i.scene=s.getType,i.range="manage"),this.mixCsuSystemTree&&(i.pid=e||0),new Promise((function(e){s.$appFetch({method:"get",url:s.getType?"systemTree":t.mixCsuSystemTree?"lazyAuthTree":"getDepartNews",data:Object(n["a"])(Object(n["a"])({},i),t.parentParams)},(function(t){if(0==t.e){if(s.showConf.filterInfo&&s.showConf.filterInfo.is_enable&&s.showConf.filterInfo.depart?s.department=s.showConf.filterInfo.depart.map((function(e){return{id:e.value,name:e.name,type:e.type}})):(s.department=t.d,1==s.newuser&&(s.department[0].disabled=!0),s.cleardepartment=t.d,s.initInfo(s.department)),!s.isopen)return;"users"==s.settype?s.$nextTick((function(){s.$refs.eltrees1.filter()})):"all"==s.settype&&s.$nextTick((function(){s.$refs.eltrees2.filter()})),e(s.department)}else s.$message.error({message:t.m})}))}))},allJob:function(){var e=this;e.$appFetch({method:"get",url:"allJob"},(function(t){0==t.e?(e.showConf.filterInfo&&e.showConf.filterInfo.is_enable&&(t.d=t.d.filter((function(t){return e.showConf.filterInfo.job.find((function(e){return e.value==t.id}))}))),e.job=t.d):e.$message.error({message:t.m})}))},allTeam:function(){var e=this;e.$appFetch({method:"get",url:"allTeam"},(function(t){if(0==t.e){if(e.team=t.d,e.showConf.filterInfo&&e.showConf.filterInfo.team){var s,i=Object(o["a"])(e.team);try{for(i.s();!(s=i.n()).done;){var a=s.value,n=e.initTeam(a.teams);n||(a.hidden=!0)}}catch(r){i.e(r)}finally{i.f()}}}else e.$message.error({message:t.m})}))},initTeam:function(e){var t=this,s=!1;return!(!e||!e.length)&&(e.forEach((function(e){var i=t.showConf.filterInfo.team.some((function(t){return t.value===e.id}));i?s=!0:e.hidden=!0})),s)},getRelative:function(){var e=this;e.$appFetch({method:"get",url:"getRelative"},(function(t){0==t.e?e.relative=t.d:e.$message.error({message:t.m})}))},getUset:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=JSON.parse(sessionStorage.getItem("officeDb_authControl_key")).permits,i=JSON.parse(sessionStorage.getItem("officeDb_authControl_key")).issuper;if(0==i&&s.includes("AppManage")&&s.includes("AppDepartManage")&&(this.flag=1),this.item=t,this.lock=!1,"scroll"==e)this.searchUser.p=this.searchUser.p+1;else{if("read"==t.auth)return void(this.selectList=[]);var a={is_enable:1,depart:"department"===e?[t.id]:[],job:"job"===e?[t.id]:[],team:"team"===e?[t.id]:[]};this.searchUser={type:e,keyword:t.id||this.searchUser.keyword,identity:"teacher"==this.listBotTab?"staff":this.listBotTab,p:1,auth:1==this.flag?"AppManage":void 0,config:JSON.stringify(a)}}var r=this;r.$appFetch({method:this.showConf.before?"post":"get",url:r.showConf.before?"getUserList":"getUser",data:Object(n["a"])(Object(n["a"])({},r.searchUser),this.parentParams)},(function(t){0==t.e?(r.lock=!0,r.ajaxLock=!1,r.searchTotal=t.d.total,"scroll"==e?(0==t.d.data.length&&(r.ajaxLock=!0),r.selectList=r.selectList.concat(t.d.data)):(r.ajaxLock=!1,r.selectList=t.d.data)):r.$message.error({message:t.m})}))},delone:function(e,t){e.splice(t,1)},quanxuan:function(e){if($(e.currentTarget).is(":checked"))for(var t in this.selectList)this.chooseResultID.includes(this.selectList[t].id)||this.chooseResult.push(this.selectList[t]);else for(var s in this.selectList)this.chooseResultID.includes(this.selectList[s].id)&&this.deloneid(this.selectList[s].id)},deloneid:function(e){for(var t in this.chooseResult)this.chooseResult[t].id==e&&this.chooseResult.splice(t,1)},searchUserScroll:function(e){var t=e.currentTarget;if($(t).height()+$(t).scrollTop()>=$(t)[0].scrollHeight-5){if(this.searchUserLock)return!1;this.searchUserLock=!0,this.searchUserPage+=1,this.searchUserF(this.keyword)}},searchUserF:function(e){var t=this,s=JSON.parse(sessionStorage.getItem("officeDb_authControl_key")).permits,i=JSON.parse(sessionStorage.getItem("officeDb_authControl_key")).issuper;0==i&&s.includes("AppManage")&&s.includes("AppDepartManage")&&(this.flag=1);var a=[],o=[],c=[];if(this.showConf.filterInfo&&this.showConf.filterInfo.is_enable&&(a=this.showConf.filterInfo.depart.map((function(e){return e.value})),o=this.showConf.filterInfo.job.map((function(e){return e.value})),c=this.showConf.filterInfo.team.map((function(e){return e.value}))),"all"==this.searchListTab)var l={type:"name",keyword:e,p:this.searchUserPage,auth:1==this.flag?"AppManage":void 0,config:JSON.stringify({is_enable:1,depart:a,job:o,team:c})};else l={type:"name",keyword:e,identity:"teacher"==this.searchListTab?"staff":this.searchListTab,p:this.searchUserPage,auth:1==this.flag?"AppManage":void 0,config:JSON.stringify({is_enable:1,depart:a,job:o,team:c})};this.$appFetch({method:this.showConf.before?"post":"get",url:this.showConf.before?"getUserList":"getUser",data:Object(n["a"])(Object(n["a"])({},l),this.parentParams)},(function(s){0==s.e?(e==t.keyword&&(t.searchList=[].concat(Object(r["a"])(t.searchList),Object(r["a"])(s.d.data)),t.searchTotal=s.d.total),0==s.d.data.length?t.searchUserLock=!0:t.searchUserLock=!1):t.$message.error({message:s.m})}))}},watch:{listBotTab:function(){var e="部门"==this.type?"department":"岗位"==this.type?"job":"team";return this.getUset(e,this.item),this.listBotTab},searchListTab:function(){return this.searchUserPage=1,this.searchUserF(this.keyword),this.searchListTab},hasChooseList:function(){this.hideNodes=[],this.allDpmt(),this.chooseResult=JSON.parse(JSON.stringify(this.hasChooseList))},keyword:function(e){var t=this;t.searchList=[],""!=e?(this.searchUserLock=!1,this.searchUserPage=1,t.timeHandler&&clearTimeout(t.timeHandler),t.timeHandler=setTimeout((function(){t.searchUserF(e)}),500)):clearTimeout(t.timeHandler)},chooseResult:function(){var e=this;for(var t in e.chooseResultID=[],e.chooseResult)e.chooseResultID.push(e.chooseResult[t].uid||e.chooseResult[t].id);e.isopen&&e.$nextTick((function(){"部门"==e.type&&("users"==e.settype?e.$refs.eltrees1.setCheckedKeys(e.chooseResultID):"all"==e.settype&&e.$refs.eltrees2.setCheckedKeys(e.chooseResultID))}))},filterText:function(e){"users"==this.settype?this.$refs.eltrees1.filter(e):"all"==this.settype&&this.$refs.eltrees2.filter(e)}},beforeDestroy:function(){this.isopen=0},filters:{handleNumber:function(e){return e?e.slice(0,2)+"****"+e.slice(e.length-2,e.length):""}}},p=Object(n["a"])({},d),f=p,m=s("0b56"),v=Object(m["a"])(f,i,a,!1,null,null,null);t["a"]=v.exports},2929:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAXCAYAAAAV1F8QAAABMUlEQVRIid3WvSsGcQDA8c89HiEhm0J2kzKhLBZZMPgXlIEIM4PBfyCr0W6RwUsGmawo8q4sJC/l6THcXZ6u8OA5yrd+XffS7/O7uu4uMJcX1YMpdKLWW7dYxwgufbNMtJ3GIpbQhKBgtOAQC99FIDCXb8Qe2nD2znUVuMNokfM+YgvH8YEsurD5AQLPwjtqLxKqxTwmsBxD2WgFnzVeJBLXio1CqLAyjKEP9V+cONkLjtCM0yQ0iUHM4uaHUBZDWEFbEurFDFZ/iMTtYBddmcSJcjyUCInbR3MSSq3/D+XSwpOT3qPmN6DU+jOoAk+/AVUK39SpQ6mViUYuRbwKTxmcC7+udThAR4mAAAPoxnZW+OOxhgvhg1CH4RJA1bhCP66Dgr+gKjREKylFLziJd14B9gM4VooOxioAAAAASUVORK5CYII="},b85c:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAABGdBTUEAALGPC/xhBQAABRJJREFUWAnVmU2IHEUUx1/1hJmdZDGH7G60HXIxqBCIYrK6hxyMeolgojdzEkFQWFECCgY9GhQUguCiJ6/eNEvAXFQ85LAxrmgg4EWQZXZMsht1cdbZmcxM+f7VXU13TVd/TM/Oknfp6qp67/2m5vWr6teCCsqtZ2fvbW/Rc1LKIySES5JcIumSoH3cvk0kGtxukJQNIcRyZYIuznxz9UYRt2IY5cYzxw70+p3TDHeKYeYkk2W1wxMl/7glVlksOeUv3W8vr2TV1fMyO4NC/enH9/Vl/11uzrPrsjYy9FVQh3UXHOGcq333I/8r2SQTtDxxolJvr5+RJN9h2L3ZTOeYJWhDkPiwVpk6Ly5daqdppkKrmG3R1ww8l2as6DiDL1Wq9EJazCdCN56ae6wne4sMXCsKlFWfweslUTrlfr/0s03HsQ2sHj96koEvjxMYLPAHv/BvY4tdaX+FAVy1KW53P694i1f8WNyKD6w0YtgPiR0DxoJgwcABHnOBItDIEm3voRtbDJtA4XuEiuJhrnB/BNpPa9YsIaq7aVftQFi/cBv2YNcmDD4HrvB4ENP+xvG7LQ+XDx2m6Q8+IWdykrZ+Xab1994iudkM28rVFnsmaer9j2nikSPUbzZp7eyb1Ll+Ld4G53HegB7QG1Cw0mqnS9g47jn9kgKGVTia/uhTguNhBHrQhx0IFgL2rcJc/k6spihonCX4bt6qxAO9f/6ODFcePjQUuAaGflhM++Exvz3vc5KCVoeflLPExhefUbdRj9jKC24Dhl3YTxTm8w5p/M+oiVI+n6jAg/2/btOtM68NDZ4EDLuwnyo+p/DOFrKR9XhZmt5PM+c/p11uNCu2f7tOa2+/HvtwpgH31m6m8mICZw1ZqQrX6bToZFZgKMJBnhUfFTB8gxMvHA43vEcYvRklK/gogQM0SUcdKei+oCNHIw3cmdmvsouZJfDQ4Z/KGhImEnjFyvHZn3jhc6+2NmaL8X6rRU41enwpCuz5FMucPfgltIDYVnx7gAEqXUe9NReAhmoA/udqrKXujUahkIgY5bd8hx/JDAkyohZ70/9vk/qbm7Fjvea/hPGRCPNyeHBdoqDoLFE++GCspcrBh4ba8mONMS/CoxC0BjazhOx2Iz7zbvkR5fAN83J4yKGhbcDIEjffeGXoLT/MONBmXgelqoGBDB1JwMjDd3hbz7NzZnCppoDXQW0Ne3pWJcxLA9YbR5BVCp4ONZs6ezCv4xVGxBU9kHbNCqztjBSca4Dg9Y6mQlzQTpKueYG1rdGBi0XYVNCoXnIWQTHQKmL3nkJniVRwtp8ozKc4eZKC9sutC0lKe19+lcy0lvcskQQO+ymyoMvCXniAnsutvNobNkWzdJAXWNu1gZv29Xx19d7Gz+m+ABqv5yi36gHz2rz4Fcmet2HcWfmj0FlCg8MOBHZh3ybg0uUDzAnqHrhRdeit9R9QIMG9KSX3fvWa1bn2C8lOahnZVB+4F+UKlQ8/St3VOvUshy0GXqpNTD0ZrltHoGHVr0dfRUlqwMuYOxi4zvXqWbNeHYSH5sEE1IdZoaX7duIK/+AwgcEyAI1OlFf5UPLiToHDL/zHlXnBNxAe6NRy130JADh+KWKKfzl/Qtt+gR/4s62wJogNDz2IK2JKPb1CnE3K42Gd3G183WL78BMXw6a9xPAwJ99V3xFN+OCLraqtySfyVKh4lTD9Cn+1vTCWL7YmPO5VXh/zt/H/AZG91yEKKC++AAAAAElFTkSuQmCC"},c4cb:function(e,t,s){},c740:function(e,t,s){"use strict";var i=s("23e7"),a=s("b727").findIndex,n=s("44d2"),r="findIndex",o=!0;r in[]&&Array(1)[r]((function(){o=!1})),i({target:"Array",proto:!0,forced:o},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n(r)}}]);